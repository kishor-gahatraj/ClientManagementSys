@model ClientManagementSys.Models.Expenses
@using ClientManagementSys.Areas.Identity.Data
@inject SignInManager<ApplicationUser> _signInManager;

@{
    ViewData["Title"] = "Create";
    Layout = "";
}






<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://code.iconify.design/2/2.2.1/iconify.min.js"></script>
    <link rel="stylesheet" href="/css/add_expense.css" asp-append-version="true">
    <script src=""></script>
    <title>Document</title>
</head>
<body>

     <div class="container">
         <span> <partial name="_DashBoardPartial" /></span>
        <div class="dashboard">
            <div class="top-nav">
                <p class="cms">Client Management System</p>
              <span > <partial name="_LoginPartial" /></span>
            </div>

            <div class="main">
                <div class="client">
                    <div class="add-client">
                        <p>Add Expense</p>

                    </div>


                </div>

                <div class="containers">
                    <div class="Contact" id="add-client">

                        <form asp-action="Create">
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                            <div class="row-1">
                                <div class="item0">

                                    <label for="name"><b>S.N</b></label>

                                </div>
                                <div class="item1">
                                    <label asp-for="Expenditure_Name"><b>Name</b></label>
                                    <span asp-validation-for="Expenditure_Name" class="text-danger"></span>
                                </div>
                                <div class="item2">
                                    <label asp-for="Expenditure_Price" class="control-label"><b>Price</b></label>
                                    <span asp-validation-for="Expenditure_Price" class="text-danger"></span>
                                </div>
                                <div class="item3">
                                    <label asp-for="Total_Price" class="control-label"><b>Total Price</b></label>
                                    <span asp-validation-for="Total_Price" class="text-danger"></span>
                                </div>
                                <div class="item4">
                                    <label asp-for="Product_Id" class="control-label"><b>Product</b></label>
                                    <span asp-validation-for="Product_Id" class="text-danger"></span>
                                </div>
                                <div class="item7">
                                    <label asp-for="Org_Id" class="control-label"><b>Organization</b></label>
                                    <span asp-validation-for="Org_Id" class="text-danger"></span>
                                </div>
                                <div class=item0>

                                    <label for="name"><b>Action</b></label>
                                </div>

                            </div>
                            <div class="row-2" id="row_body">
                                <div class=" column item-1 sn">
                                </div>
                                <div class=" column item-2">
                                    <input asp-for="Expenditure_Name" />
                                    <span asp-validation-for="Expenditure_Name" class="text-danger"></span>
                                </div>
                                <div class=" column item-3">
                                    <input asp-for="Expenditure_Price" class="form-control" />
                                    <span asp-validation-for="Expenditure_Price" class="text-danger"></span>
                                </div>
                                <div class=" column item-4">
                                    <input asp-for="Total_Price" class="form-control" />
                                    <span asp-validation-for="Total_Price" class="text-danger"></span>
                                </div>
                                <div class=" column item-5">
                                    <select asp-for="Product_Id" class="form-control" asp-items="ViewBag.Product_Id"></select>
                                </div>
                                <div class=" column item-6">
                                    <select asp-for="Org_Id" class="form-control" asp-items="ViewBag.Org_Id"></select>
                                </div>


                                <div>


                                    <input type="submit" value="Create"  />
                           @*     </div>
                            </div>
                            <div>*@
                                <input type="submit" value="List" asp-action="Index"></input>
                            </div>
                        </form>

                        <div class="footer">
                            <h6>Client Management system 2022 by Silicon soft Nepal</h6>
                        </div>
                    </div>
                </div>



                @section Scripts {
                @{
                await Html.RenderPartialAsync("_ValidationScriptsPartial");
                }
                }







                <script src="/js/navbar.js"></script>


                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

                <script asp-append-version="true">

                        $(document).ready(function() {

                          let currentSN = GenerateSerialNum();

                          SetSerialNum(currentSN);

                          var max_fields = 0;
                          var wrapper = $(".row-2");
                          var add_button = $(".addbtn");
                          var x = 1; //initlal text box count

                          $(add_button).click(function(e){

                              e.preventDefault();

                             if(x > max_fields){
                                  x++;
                                  $(wrapper).append('<div class="row-2" id="row_body"><div class=" column item-1 sn"></div><div class=" column item-2"><input asp-for="Expenditure_Name"></div><div class=" column item-3"><input asp-for="Expenditure_Price"></div><div class=" column item-4"><input asp-for="Total_Price"></div><div class=" column item-5"><select asp-for="Product_Id" asp-items="ViewBag.Product_Id"></select><div class=" column item-6"><select asp-for="Org_Id"  asp-items="ViewBag.Org_Id"></select><button style="cursor:pointer;background-color:red;" class="addbtn removebtn" onclick="add(event)" >  &minus; </button>  </div>');
                              }

                              let currentSN = GenerateSerialNum();

                              SetSerialNum(currentSN);

                          });
                          $(wrapper).on("click",".removebtn", function(e){
                          e.preventDefault();
                          $(this).parent('div').remove();
                          // debugger
                            const rows = document.querySelectorAll('.row-2');
                            rows.forEach((row, index)=>{
                              row.getElementsByClassName('sn')[0].innerHTML = index + 1
                            })
                           x--;
                          })


                          function GenerateSerialNum()
                          {
                            let currentSN = document.getElementsByClassName('row-2').length;
                            return currentSN;
                          }

                          function SetSerialNum(currentSN)
                          {
                            const last = Array.from( document.querySelectorAll('.row-2')).pop();
                            last.getElementsByClassName('sn')[0].innerHTML = currentSN;
                          }
                    });
                </script>
</body>
</html>











@*<h1>Create</h1>

    <h4>Expenses</h4>
    <hr />
    <div class="row">
    <div class="col-md-4">
    <form asp-action="Create">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <div class="form-group">
    <label asp-for="Expenditure_Name" class="control-label"></label>
    <input asp-for="Expenditure_Name" class="form-control" />
    <span asp-validation-for="Expenditure_Name" class="text-danger"></span>
    </div>
    <div class="form-group">
    <label asp-for="Expenditure_Price" class="control-label"></label>
    <input asp-for="Expenditure_Price" class="form-control" />
    <span asp-validation-for="Expenditure_Price" class="text-danger"></span>
    </div>
    <div class="form-group">
    <label asp-for="Total_Price" class="control-label"></label>
    <input asp-for="Total_Price" class="form-control" />
    <span asp-validation-for="Total_Price" class="text-danger"></span>
    </div>
    <div class="form-group">
    <label asp-for="Product_Id" class="control-label"></label>
    <input asp-for="Product_Id" class="form-control" />
    <span asp-validation-for="Product_Id" class="text-danger"></span>
    </div>
    <div class="form-group">
    <input type="submit" value="Create" class="btn btn-primary" />
    </div>
    </form>
    </div>
    </div>
*@

